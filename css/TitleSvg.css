/* ============================================================
   博客标题 SVG 描边动画 - "我不想当ai"
   修复版：正确的动画时长
   ============================================================ */

/* ---------- SVG 容器 ---------- */
.navbar-brand .title-svg {
    width: 185px;
    height: 36px;
    overflow: visible;
    margin-left: -5px;
}

/* ---------- 描边基础样式 ---------- */
.navbar-brand .title-path {
    fill: transparent;
    stroke: #fff;
    stroke-width: 1.5;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-dasharray: var(--path-length);
    stroke-dashoffset: var(--path-length);
}

/* ---------- 动画状态由 JS 控制 ---------- */
.navbar-brand .title-path.animating {
    animation: strokeDraw 2.7s ease-in-out forwards;
}

.navbar-brand .title-path.animating.fill-stage {
    animation: 
        strokeDraw 2.7s ease-in-out forwards,
        fillIn 0.7s ease-out forwards;
}

/* 描边动画 - 简单的 0 到 path-length */
@keyframes strokeDraw {
    from {
        stroke-dashoffset: var(--path-length);
        stroke-opacity: 1;
    }
    to {
        stroke-dashoffset: 0;
        stroke-opacity: 1;
    }
}

/* 填充淡入 */
@keyframes fillIn {
    from {
        fill: transparent;
    }
    to {
        fill: rgba(255, 255, 255, 0.95);
        stroke-opacity: 0.15;
    }
}

/* ---------- 悬停效果 ---------- */
.navbar-brand:hover .title-path.completed {
    animation: gentleGlow 2.5s ease-in-out infinite;
}

@keyframes gentleGlow {
    0%, 100% {
        filter: drop-shadow(0 0 0 transparent);
    }
    50% {
        filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.25));
    }
}

/* ---------- 深色模式 ---------- */
[data-user-color-scheme="dark"] .navbar-brand .title-path {
    stroke: #e0e0e0;
}

[data-user-color-scheme="dark"] .navbar-brand .title-path.animating.fill-stage {
    animation: 
        strokeDraw 2.7s ease-in-out forwards,
        fillInDark 0.7s ease-out forwards;
}

@keyframes fillInDark {
    from {
        fill: transparent;
    }
    to {
        fill: rgba(224, 224, 224, 0.95);
        stroke-opacity: 0.15;
    }
}

[data-user-color-scheme="dark"] .navbar-brand:hover .title-path.completed {
    animation: gentleGlowDark 2.5s ease-in-out infinite;
}

@keyframes gentleGlowDark {
    0%, 100% {
        filter: drop-shadow(0 0 0 transparent);
    }
    50% {
        filter: drop-shadow(0 0 4px rgba(224, 224, 224, 0.2));
    }
}

/* ---------- 完成状态 ---------- */
.navbar-brand .title-path.completed {
    animation: none;
    stroke-dashoffset: 0;
    stroke-opacity: 0.15;
    fill: rgba(255, 255, 255, 0.95);
}

[data-user-color-scheme="dark"] .navbar-brand .title-path.completed {
    fill: rgba(224, 224, 224, 0.95);
}

/* ---------- 跳过动画（已播放过） ---------- */
.navbar-brand .title-path.no-animation {
    animation: none;
    stroke-dashoffset: 0;
    stroke-opacity: 0.15;
    fill: rgba(255, 255, 255, 0.95);
}

[data-user-color-scheme="dark"] .navbar-brand .title-path.no-animation {
    fill: rgba(224, 224, 224, 0.95);
}

/* ---------- 减少动画偏好 ---------- */
@media (prefers-reduced-motion: reduce) {
    .navbar-brand .title-path {
        animation: none !important;
        stroke-dashoffset: 0;
        stroke-opacity: 0;
        fill: #fff;
    }
    
    [data-user-color-scheme="dark"] .navbar-brand .title-path {
        fill: #e0e0e0;
    }
}
