/* ============================================================
   博客标题 SVG 描边动画 - "我不想当ai"
   
   功能特性：
   - 描边绘制动画 (2.7s)
   - 填充淡入效果 (0.7s)
   - 悬停微光呼吸
   - 深色模式适配
   - 减少动画偏好支持
   - 点击穿透确保链接可用
   ============================================================ */

/* ---------- SVG 容器 ---------- */
.navbar-brand {
    font-size: 0;  /* 隐藏原始文字，防止闪现 */
}

.navbar-brand .title-svg {
    width: 185px;
    height: 36px;
    overflow: visible;
    margin-left: -7px;
    pointer-events: none;  /* 确保点击穿透到父元素链接 */
}

/* ---------- 描边基础样式 ---------- */
.navbar-brand .title-path {
    fill: transparent;
    stroke: #fff;
    stroke-width: 1.5;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-dasharray: var(--path-length);
    stroke-dashoffset: var(--path-length);
}

/* ---------- 动画状态由 JS 控制 ---------- */
.navbar-brand .title-path.animating {
    animation: strokeDraw 2.7s ease-in-out forwards;
}

.navbar-brand .title-path.animating.fill-stage {
    animation: 
        strokeDraw 2.7s ease-in-out forwards,
        fillIn 0.7s ease-out forwards;
}

/* 描边动画 - 简单的 0 到 path-length */
@keyframes strokeDraw {
    from {
        stroke-dashoffset: var(--path-length);
        stroke-opacity: 1;
    }
    to {
        stroke-dashoffset: 0;
        stroke-opacity: 1;
    }
}

/* 填充淡入 */
@keyframes fillIn {
    from {
        fill: transparent;
    }
    to {
        fill: rgba(255, 255, 255, 0.95);
        stroke-opacity: 0.15;
    }
}

/* ---------- 悬停发光动画定义 ---------- */
@keyframes gentleGlow {
    0%, 100% {
        filter: drop-shadow(0 0 0 transparent);
    }
    50% {
        filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.25));
    }
}

/* ---------- 深色模式 ---------- */
[data-user-color-scheme="dark"] .navbar-brand .title-path {
    stroke: #e0e0e0;
}

[data-user-color-scheme="dark"] .navbar-brand .title-path.animating.fill-stage {
    animation: 
        strokeDraw 2.7s ease-in-out forwards,
        fillInDark 0.7s ease-out forwards;
}

@keyframes fillInDark {
    from {
        fill: transparent;
    }
    to {
        fill: rgba(224, 224, 224, 0.95);
        stroke-opacity: 0.15;
    }
}

@keyframes gentleGlowDark {
    0%, 100% {
        filter: drop-shadow(0 0 0 transparent);
    }
    50% {
        filter: drop-shadow(0 0 4px rgba(224, 224, 224, 0.2));
    }
}

/* ---------- 完成状态 & 跳过动画（合并） ---------- */
.navbar-brand .title-path.completed,
.navbar-brand .title-path.no-animation {
    animation: none;
    stroke-dashoffset: 0;
    stroke-opacity: 0.15;
    fill: rgba(255, 255, 255, 0.95);
}

[data-user-color-scheme="dark"] .navbar-brand .title-path.completed,
[data-user-color-scheme="dark"] .navbar-brand .title-path.no-animation {
    fill: rgba(224, 224, 224, 0.95);
}

/* 悬停发光效果（两种状态都支持） */
.navbar-brand:hover .title-path.completed,
.navbar-brand:hover .title-path.no-animation {
    animation: gentleGlow 2.5s ease-in-out infinite;
}

[data-user-color-scheme="dark"] .navbar-brand:hover .title-path.completed,
[data-user-color-scheme="dark"] .navbar-brand:hover .title-path.no-animation {
    animation: gentleGlowDark 2.5s ease-in-out infinite;
}

/* ---------- 减少动画偏好 ---------- */
@media (prefers-reduced-motion: reduce) {
    .navbar-brand .title-path {
        animation: none !important;
        stroke-dashoffset: 0;
        stroke-opacity: 0.15;
        fill: rgba(255, 255, 255, 0.95);
    }
    
    [data-user-color-scheme="dark"] .navbar-brand .title-path {
        fill: rgba(224, 224, 224, 0.95);
    }
}
